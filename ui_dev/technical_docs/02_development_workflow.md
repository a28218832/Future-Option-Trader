# 開發流程與交付節奏（Development Workflow）

## 1. 開發模式

採「階段式交付」：每一階段都可執行、可驗收、可回滾。

## 2. 階段定義

### Phase 1（已進行）

目標：建立最小可用交易介面（K 線 + T 字報表 + 篩選）。

交付項：

- Dash 單頁應用
- 資料讀取/清洗
- 三組基礎 callback

驗收：

- 可成功啟動應用
- K 線與表格可隨篩選更新

### Phase 2（待實作）

目標：完成 Leg 勾選到 Payoff 曲線即時連動。

交付項：

- `selectedRows` -> payoff 計算 callback
- 策略組合總收益線
- 策略摘要指標（損益平衡點、最大損失）

### Phase 3（待實作）

目標：即時資料與效能穩定化。

交付項：

- 快取策略（記憶體或 Redis）
- 回呼延遲監測
- 大資料集下互動優化

### Phase 4（待實作）

目標：部署、監控、維運流程完成。

交付項：

- 測試套件（單元/整合）
- 生產部署腳本
- 故障處理 runbook

## 3. 每階段標準工作流

1. 需求澄清：確定輸入、輸出、邊界條件
2. 欄位契約：先定義資料 schema 再寫 UI
3. 實作：先資料層，再 callback，最後視覺層
4. 檢查：語法、互動、邏輯、效能
5. 文件更新：功能、限制、已知風險

## 4. Git 與版本建議

- 每個階段使用獨立分支（例：`phase1-mvp`, `phase2-payoff`）
- commit 應小且可讀：
  - `feat(ui): add option table filters`
  - `feat(callback): add expiry refresh`
  - `docs(tech): add runtime sequence`

## 5. 開發規範

1. 不在 callback 內做重型 I/O
2. 不混用資料讀取路徑（csv/parquet）而不註明
3. 所有欄位名維持中文原始欄位與英文衍生欄位並存
4. 對缺值（`-`）統一轉 NaN，避免隱性型別錯誤

## 6. 交付檢查清單

- [ ] 功能符合該階段需求
- [ ] 既有功能無回歸
- [ ] 文件與程式一致
- [ ] 執行步驟可由他人重現
